--- homing.py.orig
+++ homing.py
@@
         if toolhead is None:
             toolhead = printer.lookup_object('toolhead')

-        self.prtouch_v3 = self.printer.lookup_object('prtouch_v3') if self.printer.objects.get('prtouch_v3') else None
-        self.prtouch_v3.z_full_movement_flag = False
+        # Prefer Cartographer's 'scanner' object; fall back to legacy 'prtouch_v3'
+        objs = getattr(self.printer, 'objects', {})
+        if objs.get('scanner'):
+            self.prtouch_v3 = self.printer.lookup_object('scanner')
+        elif objs.get('prtouch_v3'):
+            self.prtouch_v3 = self.printer.lookup_object('prtouch_v3')
+        else:
+            self.prtouch_v3 = None
+
+        # Only set the flag if a probe/scanner object is present
+        if self.prtouch_v3 is not None:
+            self.prtouch_v3.z_full_movement_flag = False
         self.toolhead = toolhead
         self.stepper_positions = []
